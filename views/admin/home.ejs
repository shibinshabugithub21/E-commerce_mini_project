<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous">

    <style>
        *{
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background-color: #f4f4f4;
            overflow: hidden;
            font-family: sans-serif;
        }

        /* Sidebar Navigation */
        .side-nav {
            background-color: black;
            color: white;
            padding: 15px;
            text-align: left;
            width: 200px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;

            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .side-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .side-nav a {
            text-decoration: none;
            color: #fff;
            display: block;
            padding: 10px;
            margin-top: 10px;
            border-radius: 3px;
            border-radius: 20px;
            transition: 0.33s ease-in-out;
            font-weight: 500;
        }

        .side-nav a:hover {
            color: black;
            background-color: white;
            border-radius: 20px;
        }

        /* Main Content Area */
        .content {
            margin-left: 200px;
            padding: 20px;
            padding-top: 30px; /* Adjusted padding for content area */
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        .overview-item {
            flex-basis: calc(25% - 20px); /* Adjust width according to the number of items */
            background-color: #06c5a8;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .overview-item h3 {
            margin-top: 0;
            color: white;
            text-transform: uppercase;
        }

        .overview-item p {
            margin: 0;
            font-size: 24px;
            font-weight: bold;
        }
        .chart{
	max-width: 900px;
	height: 450px;
	padding: 50px;
	margin: 0 auto;
}
.chart .chart_types{
	text-align: center;
	margin-bottom: 30px;
}
.chart .chart_types button{
	padding: 10px 25px;
}
    </style>
</head>

<body>
    <!-- Sidebar Navigation -->
    <div class="side-nav">
        <ul>
            <li><a href="/admin/home">Dashboard</a></li>
            <li><a href="/admin/user">User</a></li>
            <li><a href="/admin/category">Category</a></li>
            <li><a href="/admin/product">Product</a></li>
            <li><a href="/admin/order">order</a></li>
            <li><a href="/admin/coupoun">coupoun</a></li>
            <li><a href="/admin/Banner">Banner</a></li>
            <li><a href="/admin/sale">Sales</a></li>
            <li><a href="/admin/logout">logout</a></li>
            <!-- Add more navigation items as needed -->
        </ul>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
    <div class="content">
        <!-- Overall Sales Count -->
        <div class="overview-item overall-sales">
            <h3>Overall Sales Amount</h3>
            <p>â‚¹<%= data.totalAmount %></p>
        </div>

        <!-- Overall Order Amount -->
        <div class="overview-item overall-order-amount">
            <h3>Total Number Order</h3>
            <p><%= data.order %></p>
        </div>

        <!-- Overall Discount -->
        <div class="overview-item overall-discount">
            <h3>Total NumbersUser</h3>
            <p><%= data.user %></p>
        </div>

        <!-- Total Product Numbers -->
        <div class="overview-item total-product-numbers">
            <h3>Total Product Numbers</h3>
            <p><%= data.product %></p>
        </div>

          <!-- Chart -->
          <div class="chart">
            
            <div class="chart_types" id="chartTypes">
                <button onclick="setChartType('bar')">Bars</button>
                <button onclick="setChartType('line')">Line</button>
                <button onclick="setChartType('doughnut')">Doughnut</button>
                <button onclick="setChartType('polarArea')">PolarArea</button>
                <button onclick="setChartType('radar')">Radar</button>
            </div>
            
            <canvas id="myChart"></canvas>
        </div>
    </div>
</div>
    <!-- Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      let ctx = document.getElementById('myChart');
let myChart;
let Jsondata;
graphData()
async function graphData(){

    fetch("/admin/graph",{method:"post"})
        .then(function(response) {
            if (response.status == 200) {
                return response.json();
            }
        })
        .then(function(data) {
            Jsondata = data;
            // console.log(data)
            createChart(Jsondata, 'bar');
            document.getElementById('chartTypes').style.display = 'block'; 
        });
}


function createChart(data,type = bar) {
    myChart = new Chart(ctx, {
        type: type,
        data: {
            labels: data.map(row => row.label),
            datasets: [{
                label: '1 years details',
                data: data.map(row => row.value),
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            responsive: true,
            maintainAspectRatio: false,
        }
    });
}



function setChartType(chartType) {
    if (myChart) {
        myChart.destroy();
    }
    createChart(Jsondata, chartType);
}




</script>



</body>

</html>
